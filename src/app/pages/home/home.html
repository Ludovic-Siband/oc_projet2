<section class="page">

  @if (isLoading()) {
  <div class="home-skeleton">
    <div class="home-skeleton__header-line"></div>
    <div class="home-skeleton__header-line"></div>
    <div class="home-skeleton__chart"></div>
  </div>
  }

  <div class="home-intro">
    <h1>The chart below shows total medals by country</h1>
    <p>click any slice to view detailed history and participation stats.</p>
  </div>

  <div class="page__chart">
    <app-pie-chart [labels]="chartLabels()" [values]="chartValues()" (sliceSelected)="onCountrySelected($event)">
    </app-pie-chart>
  </div>

@if (!isLoading() && countriesTable().length) {
    <table class="sr-only-table">
      <caption>Countries and total medals displayed in the chart</caption>
      <thead>
        <tr>
          <th scope="col">Country</th>
          <th scope="col">Total medals</th>
          <th scope="col">Action</th>
        </tr>
      </thead>
      <tbody>
        @for (item of countriesTable(); track item.country) {
          <tr>
            <td>{{ item.country }}</td>
            <td>{{ item.totalMedals }}</td>
            <td>
              <button
                type="button"
                (click)="onCountrySelected(item.country)"
                [attr.aria-label]="'View details for ' + item.country">
                View details
              </button>
            </td>
          </tr>
        }
      </tbody>
    </table>
  }

</section>